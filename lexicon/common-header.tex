\documentclass{article}
\usepackage[english]{babel}
\usepackage{fontspec}
\usepackage{amssymb}
\usepackage[margin=0.7in]{geometry}
\usepackage{expl3}

% Use a font that supports IPA symbols.
\setmainfont{FreeSerif}

% Define Najan font.
\newfontfamily{\najanFont}{[Najan.ttf]}
% Define bold Najan font.
\newfontfamily{\najanFontBold}{[NajanBold.ttf]}

% Convert a transliteration to a version with no digraphs (or n-graphs).
\ExplSyntaxOn
\tl_new:N \l_nodigraphs_tl
\cs_new:Npn \nodigraphs #1 {
	\tl_set:Nn \l_najan_tl {#1}
	\regex_replace_all:nnN {gq} {Q} \l_najan_tl
	\regex_replace_all:nnN {tq} {C} \l_najan_tl
	\regex_replace_all:nnN {dq} {J} \l_najan_tl
	\regex_replace_all:nnN {kq} {q} \l_najan_tl
	\regex_replace_all:nnN {gh} {H} \l_najan_tl
	\regex_replace_all:nnN {xh} {X} \l_najan_tl
	\regex_replace_all:nnN {rh} {R} \l_najan_tl
	\regex_replace_all:nnN {sh} {S} \l_najan_tl
	\regex_replace_all:nnN {zh} {Z} \l_najan_tl
	\regex_replace_all:nnN {th} {T} \l_najan_tl
	\regex_replace_all:nnN {dh} {D} \l_najan_tl
	\regex_replace_all:nnN {nh} {N} \l_najan_tl
	\regex_replace_all:nnN {ih} {I} \l_najan_tl
	\regex_replace_all:nnN {uh} {U} \l_najan_tl
	\regex_replace_all:nnN {kh} {h} \l_najan_tl
	\regex_replace_all:nnN {/ls7/} {¡} \l_najan_tl
	\regex_replace_all:nnN {/ls6/} {¢} \l_najan_tl
	\regex_replace_all:nnN {/ls5/} {£} \l_najan_tl
	\regex_replace_all:nnN {/ls4/} {¤} \l_najan_tl
	\regex_replace_all:nnN {/ls3/} {¥} \l_najan_tl
	\regex_replace_all:nnN {/ls2/} {¦} \l_najan_tl
	\regex_replace_all:nnN {/ls1/} {§} \l_najan_tl
	\regex_replace_all:nnN {/rs1/} {¨} \l_najan_tl
	\regex_replace_all:nnN {/rs2/} {©} \l_najan_tl
	\regex_replace_all:nnN {/rs3/} {ª} \l_najan_tl
	\regex_replace_all:nnN {/rs4/} {«} \l_najan_tl
	\regex_replace_all:nnN {/rs5/} {¬} \l_najan_tl
	\regex_replace_all:nnN {/rs6/} {®} \l_najan_tl
	\regex_replace_all:nnN {/rs7/} {¯} \l_najan_tl
	\tl_use:N \l_najan_tl
}
\ExplSyntaxOff

% Render a transliteration in najan characters.
\NewDocumentCommand{\naj}{m}{{\hyphenrules{nohyphenation}\najanFont\nodigraphs{#1}}}

% Render a transliteration in bold najan characters.
\NewDocumentCommand{\najBold}{m}{{\hyphenrules{nohyphenation}\najanFontBold\nodigraphs{#1}}}

% Render a transliteration in IPA.
\ExplSyntaxOn
\tl_new:N \l_ipa_tl
\cs_new:Npn \ipa #1 {
	\tl_set:Nn \l_najan_tl {#1}
	\regex_replace_all:nnN {gq} {Q} \l_najan_tl
	\regex_replace_all:nnN {tq} {C} \l_najan_tl
	\regex_replace_all:nnN {dq} {J} \l_najan_tl
	\regex_replace_all:nnN {kq} {q} \l_najan_tl
	\regex_replace_all:nnN {gh} {H} \l_najan_tl
	\regex_replace_all:nnN {xh} {X} \l_najan_tl
	\regex_replace_all:nnN {rh} {R} \l_najan_tl
	\regex_replace_all:nnN {sh} {S} \l_najan_tl
	\regex_replace_all:nnN {zh} {Z} \l_najan_tl
	\regex_replace_all:nnN {th} {T} \l_najan_tl
	\regex_replace_all:nnN {dh} {D} \l_najan_tl
	\regex_replace_all:nnN {nh} {N} \l_najan_tl
	\regex_replace_all:nnN {ih} {I} \l_najan_tl
	\regex_replace_all:nnN {uh} {U} \l_najan_tl
	\regex_replace_all:nnN {kh} {h} \l_najan_tl
	\regex_replace_all:nnN {k} {kʰ} \l_najan_tl
	\regex_replace_all:nnN {x} {ɾ̥ʰ} \l_najan_tl
	\regex_replace_all:nnN {r} {ɾ} \l_najan_tl
	\regex_replace_all:nnN {t} {tʰ} \l_najan_tl
	\regex_replace_all:nnN {p} {pʰ} \l_najan_tl
	\regex_replace_all:nnN {q} {k͡xʰ} \l_najan_tl
	\regex_replace_all:nnN {Q} {g͡ɣ} \l_najan_tl
	\regex_replace_all:nnN {C} {t͡sʰ} \l_najan_tl
	\regex_replace_all:nnN {J} {d͡z} \l_najan_tl
	\regex_replace_all:nnN {c} {t͡ʃʰ} \l_najan_tl
	\regex_replace_all:nnN {j} {d͡ʒ} \l_najan_tl
	\regex_replace_all:nnN {h} {x} \l_najan_tl
	\regex_replace_all:nnN {H} {ɣ} \l_najan_tl
	\regex_replace_all:nnN {X} {r̥} \l_najan_tl
	\regex_replace_all:nnN {R} {r} \l_najan_tl
	\regex_replace_all:nnN {S} {ʃ} \l_najan_tl
	\regex_replace_all:nnN {Z} {ʒ} \l_najan_tl
	\regex_replace_all:nnN {T} {θ} \l_najan_tl
	\regex_replace_all:nnN {D} {ð} \l_najan_tl
	\regex_replace_all:nnN {N} {ŋ} \l_najan_tl
	\regex_replace_all:nnN {y} {j} \l_najan_tl
	\regex_replace_all:nnN {U} {ʊ} \l_najan_tl
	\regex_replace_all:nnN {a} {ɑ} \l_najan_tl
	\regex_replace_all:nnN {e} {ɛ} \l_najan_tl
	\regex_replace_all:nnN {I} {ɪ} \l_najan_tl
	\regex_replace_all:nnN {i} {i} \l_najan_tl
	\regex_replace_all:nnN {u} {u} \l_najan_tl
	\tl_use:N \l_najan_tl
}
\ExplSyntaxOff

% Writes the given transliteration in Najan script followed by the italicized transliteration in parentheses.
\NewDocumentCommand{\trans}{m}{\naj{#1} ⟨#1⟩}

% Writes the given transliteration in Najan script followed by the italicized transliteration in parentheses on a new line.
\NewDocumentCommand{\transLine}{m}{\naj{#1} \\ ⟨#1⟩}
